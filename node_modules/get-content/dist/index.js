'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var url = require('is-url');
var fs = require('fs');
var Promise = require('promise');
var rp = require('request-promise');

/**
 *
 *
 */
var linkType = function linkType(link) {
  var formatedLink = link.replace(/^unix:/, 'http://unix:');
  try {
    if (url(formatedLink)) {
      return 'url';
    } else if (fs.lstatSync(formatedLink).isFile()) {
      return 'file';
    } else {
      return false;
    }
  } catch (e) {
    return false;
  }
};

/**
 *
 *
 */
var get = function get(link) {
  var type = linkType(link);

  switch (type) {
    case 'url':
      return rp(link);
    case 'file':
      return new Promise(function (fulfill, reject) {
        fs.readFile(link, 'utf-8', function (err, res) {
          if (err) {
            reject(err);
          } else {
            fulfill(res);
          }
        });
      });
    default:
      throw new Error('Unable to detect type of ' + link);
  }
};

exports['default'] = { linkType: linkType, get: get };
module.exports = exports['default'];